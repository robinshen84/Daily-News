# 日报自动生成器

🎨 **制作者：靠谱瓦叔**

一个基于Python Flask的全能新闻日报生成器，支持AI新闻和综合新闻双格式智能解析，提供42个精美主题配色，可快速生成专业美观的日报并一键导出图片。从AI科技资讯到时政财经，一个工具解析所有新闻类型。

## ✨ 功能特点

- **🎨 自定义设计**: 支持上传Logo、选择颜色主题或自定义颜色
- **🧠 双格式智能解析**: 支持AI新闻和综合新闻两种格式，自动解析成结构化条目
- **📝 内容管理**: 灵活添加/删除新闻条目，支持多种标签分类
- **👀 实时预览**: 即时生成HTML预览，所见即所得
- **📸 图片导出**: 一键将日报导出为高质量PNG图片
- **📱 手机端优化**: 专为手机传播设计，卡片式布局，类似上传图片效果
- **🎯 制作者标识**: 可选显示/隐藏制作者信息
- **📦 exe打包**: 一键打包成独立可执行文件
- **🚀 开箱即用**: 简单安装，快速启动

## 🛠️ 技术栈

- **后端**: Python 3.7+ + Flask
- **前端**: HTML5 + CSS3 + JavaScript + Bootstrap 5
- **图片生成**: Playwright (无头浏览器截图)
- **文件处理**: Pillow

## 📦 安装步骤

### 1. 克隆项目
```bash
git clone <项目地址>
cd daily-report-generator
```

### 2. 创建虚拟环境
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# macOS/Linux
source venv/bin/activate
```

### 3. 安装依赖
```bash
pip install -r requirements.txt
```

### 4. 安装Playwright浏览器
```bash
playwright install chromium
```

### 5. 启动应用
```bash
# 使用专业启动器（推荐）
python launcher.py

# 或直接启动
python app.py
```

应用将运行在 `http://localhost:5000`，会自动打开浏览器

## 📦 打包成exe文件

```bash
# 双击运行打包脚本
打包带图标.bat

# 生成的exe文件在 dist/ 目录中
```

## 🎯 使用指南

### 📱 手机端优化特性

🎉 **全新手机端体验**：
- **卡片式设计**: 日报以精美卡片形式呈现，类似上传图片效果
- **完美适配**: 字体大小和间距专为手机屏幕优化
- **触感体验**: 卡片具有轻微浮动效果，增强交互感
- **阅读友好**: 内容布局紧凑但不拥挤，易于在手机上阅读和传播

### 基本操作

1. **输入日报信息**
   - 填写日报名称（如"科技日报"）
   - 可选择填写签名/标语

2. **上传Logo**
   - 点击上传区域或拖拽图片文件
   - 支持PNG、JPG、JPEG、GIF、WEBP格式
   - 建议使用正方形图片，系统会自动裁剪为圆形

3. **选择颜色主题**
   - 从42个精美主题中选择，包含苹果风格、柔和自然、商务专业等系列
   - 或使用自定义颜色功能

4. **智能解析新闻内容**
   - 选择新闻格式（AI新闻 或 综合新闻）
   - 粘贴整块新闻内容到解析区域
   - 点击"智能解析新闻"一键生成结构化条目
   - 或手动点击"添加新闻"按钮逐条添加

5. **生成预览**
   - 点击"生成预览"查看效果
   - 支持实时预览，可随时调整

6. **导出图片**
   - 点击"导出图片"生成PNG文件
   - 自动下载到本地

### 颜色主题说明

- **经典蓝**: 专业稳重，适合商务场景
- **优雅紫**: 创意时尚，适合设计/创意行业
- **自然绿**: 清新自然，适合环保/健康主题
- **活力橙**: 热情活跃，适合营销/活动
- **深邃黑**: 高端大气，适合科技/奢侈品

### 新闻格式说明

#### 🤖 AI新闻格式
适合科技、AI相关资讯，编号列表格式：
```
AI早报 2025年09月17日

1. 阿里巴巴通义实验室发布端到端语音识别大模型FunAudio-ASR，提升高噪声环境识别准确率，降低幻觉。

2. 腾讯正式发布混元3D 3.0模型，建模精度提升3倍，几何分辨率达1536³，支持36亿体素超高清建模。
```

#### 🌍 综合新闻格式
适合时政、财经、社会新闻，标题:内容格式：
```
特朗普抵达英国进行国事访问:特朗普今天抵达英国，与夫人一同下飞机，展开国事访问，引发民众抗议活动。

美股收盘百度大涨超7%:在美国股市中，百度股票收盘上涨超过7%，受市场关注。
```

### 标签类型

#### 科技类标签
- **AI工具**: 人工智能相关新闻
- **科技**: 通用科技新闻  
- **设计**: 设计/UI/UX相关
- **硬件**: 硬件设备新闻
- **安全**: 网络安全/数据安全
- **移动**: 移动应用/移动设备
- **Web**: Web开发/网站相关
- **数据**: 大数据/数据分析

#### 综合类标签
- **政治**: 政府、外交、政策类新闻
- **财经**: 股市、金融、投资类新闻
- **军事**: 战争、冲突、国防类新闻
- **商业**: 企业、市场、商务类新闻
- **社会**: 民生、事件、社会类新闻
- **体育**: 比赛、运动、赛事类新闻
- **娱乐**: 影视、音乐、综艺类新闻
- **天气**: 气象、气候、自然灾害类新闻

## 📁 项目结构

```
daily-report-generator/
├── app.py                 # Flask应用主文件
├── requirements.txt       # Python依赖
├── README.md             # 项目说明
├── templates/            # HTML模板
│   └── index.html        # 主页面模板
└── uploads/              # 临时文件夹（自动创建）
```

## ⚙️ 配置说明

### 环境变量（可选）
```bash
# 设置Flask环境
export FLASK_ENV=development

# 设置最大文件上传大小（默认16MB）
export MAX_CONTENT_LENGTH=16777216
```

### 自定义配置
在 `app.py` 中可以修改以下配置：

```python
# 上传文件大小限制
app.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024

# 支持的图片格式
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'webp'}

# 服务器配置
app.run(debug=True, host='0.0.0.0', port=5000)
```

## 🐛 常见问题

### Q: 图片导出失败？
A: 请确保已正确安装Playwright浏览器：
```bash
playwright install chromium
```

### Q: Logo上传失败？
A: 检查图片格式是否支持，文件大小是否超过16MB限制。

### Q: 预览显示空白？
A: 确保填写了日报名称和至少一条新闻内容。

### Q: 生成的图片质量不高？
A: 图片生成使用2倍缩放以提高质量，如需调整可修改 `app.py` 中的 `scale` 参数。

## 🔧 开发扩展

### 添加新的颜色主题
在 `app.py` 的 `COLOR_THEMES` 字典中添加新主题：

```python
'new_theme': {
    'name': '主题名称',
    'primary': '#主色调',
    'secondary': '#次色调', 
    'accent': '#强调色',
    'header_gradient': 'linear-gradient(...)',
    'footer_gradient': 'linear-gradient(...)'
}
```

### 添加新的标签类型
在 `NEWS_TAGS` 字典中添加：

```python
'new_tag': {
    'name': '标签名称',
    'icon': 'fa-图标名',
    'color': '#颜色值'
}
```

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📧 联系方式

如有问题或建议，请提交Issue或联系开发者。

## 📋 版本更新记录

### v3.0.0 - 新闻解析格式大升级 (2025-09-17)

🚀 **重大功能升级：从AI专家到全能新闻解析专家**

#### 🆕 核心新增功能
- **双格式智能解析**: 新增综合新闻格式支持，现支持AI新闻和综合新闻两种解析模式
- **智能格式选择器**: 精美的可视化格式选择界面，支持实时切换和动态示例展示
- **动态提示系统**: 根据选择的格式自动更新输入提示和占位符内容

#### 🧠 解析引擎升级
- **AI新闻格式**: 保持原有强大的AI科技新闻解析能力（编号列表格式）
- **综合新闻格式**: 全新支持"标题:内容"格式，适配时政、财经、社会新闻
  - 智能冒号分割算法
  - 句号备用分割策略  
  - 长度智能分割机制
  - 默认处理兜底方案

#### 🏷️ 标签体系大扩展
**新增8大综合新闻标签**：
- 🏛️ **政治** - 政府、外交、政策类新闻
- 📈 **财经** - 股市、金融、投资类新闻
- ⚔️ **军事** - 战争、冲突、国防类新闻
- 💼 **商业** - 企业、市场、商务类新闻
- 👥 **社会** - 民生、事件、社会类新闻
- ⚽ **体育** - 比赛、运动、赛事类新闻
- 🎬 **娱乐** - 影视、音乐、综艺类新闻
- 🌤️ **天气** - 气象、气候、自然灾害类新闻

#### 🏢 实体识别系统扩展
**新增150+机构和公司识别**：
- **政府机构**: 特朗普、拜登、白宫、国务院、外交部等
- **金融机构**: 摩根大通、高盛、美联储、支付宝、比特币等
- **传统企业**: 通用汽车、丰田、波音、沃尔玛、可口可乐等
- **媒体娱乐**: CNN、BBC、新华社、迪士尼、Netflix等
- **能源制造**: 中石油、壳牌、宁德时代、比亚迪等

#### 🎨 界面体验优化
- **格式选择器**: 精美卡片式设计，悬停动效，选中状态高亮
- **响应式布局**: 手机端和桌面端完美适配
- **交互体验**: 格式切换时智能更新相关内容和提示

#### ⚡ 性能和兼容性
- **完全向下兼容**: AI新闻解析功能保持100%兼容
- **智能算法优化**: 解析准确率显著提升
- **错误处理增强**: 更好的异常处理和用户提示

#### 📊 数据统计
- **解析引擎**: 1个 → 2个（双引擎架构）
- **支持格式**: 1种 → 2种（AI + 综合新闻）
- **新闻标签**: 8个 → 16个（翻倍扩展）
- **实体识别**: 50+ → 200+（4倍增长）
- **适用场景**: AI科技 → 全领域新闻

### v2.0.0 - 苹果风格配色和用户体验升级 (2025-09-17)

#### 🎨 配色主题大升级
- **新增37个精美主题**: 总计从5个扩展到42个专业配色
- **苹果风格系列**: 参考Apple Human Interface Guidelines，8个护眼舒适配色
- **柔和自然系列**: 6个低饱和度配色，减少视觉疲劳
- **商务专业系列**: 3个高端商务配色，适合正式场合
- **推荐配色前置**: 最佳配色优先展示，改善用户选择体验

#### 🎯 配色体验优化
- **主题分组展示**: 推荐、苹果风格、商务、经典分组
- **图标辅助识别**: 每个主题配备对应emoji图标
- **推荐标注**: 护眼配色明确标注"（推荐）"
- **滚动条美化**: 精美滚动条样式，支持大量主题展示

#### 🐛 重要修复
- **Logo上传修复**: 解决上传后无法更换Logo的问题
- **事件监听优化**: 重构DOM更新后的事件重新绑定机制
- **错误处理增强**: 完善文件上传的异常处理和用户反馈

### v1.0.0 - 初始版本 (2025-09-16)

#### 🎉 核心功能实现
- **日报生成**: 基础的日报创建和预览功能
- **Logo上传**: 支持多种图片格式的Logo上传
- **颜色主题**: 5个基础配色主题
- **新闻管理**: 添加、编辑、删除新闻条目
- **智能解析**: AI新闻格式的智能解析功能
- **图片导出**: 高质量PNG图片导出
- **手机优化**: 专为手机端传播优化的布局设计

---

**享受创建美观日报的过程！** 🎉
